# Environment
CC=g++
CCC=g++
CXX=g++
RM = "C:\MinGW\msys\1.0\bin\rm.exe"
MKDIR = "C:\MinGW\msys\1.0\bin\mkdir.exe"

BUILD_NUMBER = 0

# Constants
.PHONY: debug
debug_000 release_000: MODULE_HEADERS_DIR = "C:\robot_project\source\module_headers\000"
debug release: MODULE_HEADERS_DIR = "C:\robot_project\source\module_headers\current"

INCLUDE_DIR_FLAGS = -I${MODULE_HEADERS_DIR}
FLAGS_MUTUAL = -Wall -m32 -std=c++11 ${INCLUDE_DIR_FLAGS} -MMD -MP -MF "${OBJECTDIR}/$@.d" -DBUILD_NUMBER=${BUILD_NUMBER}

debug: OBJECTDIR = build/Debug
debug_000: OBJECTDIR = build/Debug_000

release: OBJECTDIR = build/Release
release_000: OBJECTDIR = build/Release_000

debug debug_000: FLAGS = -g ${FLAGS_MUTUAL}
release release_000: FLAGS = -O3 ${FLAGS_MUTUAL}

debug debug_000 release release_000: clean module

clean:
	@echo "-------------------------" 
	${RM} -rf ${OBJECTDIR}


test_control_module.o:  test_control_module.cpp
	@echo "-------------------------" 
	${MKDIR} -p ${OBJECTDIR}
	${RM} -f "${OBJECTDIR}/$@.d"
	$(COMPILE.cc) $(FLAGS) -o ${OBJECTDIR}/test_control_module.o test_control_module.cpp


module: test_control_module.o
	@echo "-------------------------" 
	${MKDIR} -p ${OBJECTDIR}
	${LINK.cc} -m32 -shared -o ${OBJECTDIR}/test_module.dll ${OBJECTDIR}/test_control_module.o
